<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Page 6 | 己の不学を恥じる</title>
  <meta name="author" content="garasubo">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="己の不学を恥じる">

  
    <meta property="og:image" content="undefined">
  
  <meta property="og:type" content="website">
<meta property="og:title" content="己の不学を恥じる">
<meta property="og:url" content="http://garasubo.github.io/hexo/page/6/index.html">
<meta property="og:site_name" content="己の不学を恥じる">
<meta property="og:locale" content="ja">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="己の不学を恥じる">
<meta name="twitter:creator" content="@garasubo">

  <link href="/hexo/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="己の不学を恥じる" type="application/atom+xml">
  <link rel="stylesheet" href="/hexo/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
</html>

<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/hexo/">己の不学を恥じる</a></h1>
  <h2><a href="/hexo/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/hexo/">Home</a></li>
    
      <li><a href="/hexo/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-07-12T10:16:00.000Z"><a href="/hexo/2014/07/12/icpc.html">2014-07-12</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2014/07/12/icpc.html">ICPC2014参戦記</a></h1>
  

    </header>
    <div class="entry">
      
        <p>ICPC2014国内予選参加しました。<br>結果は5完の24位でアジア地区予選には自明に進めないのでここでおしまい。</p>
<h1 id="解いた問題と方針"><a href="#解いた問題と方針" class="headerlink" title="解いた問題と方針"></a>解いた問題と方針</h1><p>相方にAを任している間に、C,Eの実装を考えて、<br>Aが終わった後、Cを通す。<br>疲れたので相方にBを任せている間に、Dの方針を聞いたり他の問題考えていた。<br>Bが終わった後、DとEを連続して実装して通す。<br>F、Gは歯がたちませんでした。</p>
<h2 id="C問題"><a href="#C問題" class="headerlink" title="C問題"></a>C問題</h2><p>はじめは二部探索かな、と思ったが、判定関数考えているうちに直接求まることに気がつく。</p>
<p>まず、各々のx軸上の区間のビルの高さの最大値を求める。ビルが存在しなければ0とする。<br>i&lt;=0となるような[i-1,i]区間ではx=iの地点がより太陽が先に見えてしまう。<br>i&gt;0となるような[i-1,i]区間ではx=i-1の地点がより太陽が先に見える。<br>よってそれぞれの区間について、太陽が先に見えるx座標とそこの高さに円が到達する時間を求める。<br>そのうち最小のものが答えとわかる。</p>
<p>r&lt;=20という制限により、区間中に存在するビルの高さの最大値は愚直に求まり、<br>到達する時間については2次方程式をさくっと解くだけ。</p>
<h2 id="D問題"><a href="#D問題" class="headerlink" title="D問題"></a>D問題</h2><p>相方から聞いた方針を具体化しただけ。</p>
<p>文字数がたかだか20なので、各文字について変換されたorされないと仮定して復号化、それを暗号化してちゃんと元に戻るかを計算すれば大丈夫、<br>というもので実装した。<br>各文字について変換したかどうかをビットマスクで表現して、’z’を復号化するときだけは例外処理。<br>ちゃんと元に戻った文字列は記録し、最後にソートして出力。</p>
<p>ただ、この方針、すぐには実装できるのだが、最大で2^20*20*25の計算となり、500000000くらいとなり、普通のプロコンだと通用しない計算量となってしまった。<br>（暗号化するかしないかのパターンで2^20通り、暗号化で20*25の処理が入る）<br>ただ、ICPCは制限時間が無く、手元で実行し出力ファイルを提出すればいいだけなので、<br>出力を待っている間、他の問題を実装していれば問題なく正解をもらえた。</p>
<p>もうちょい何とかするとすると、暗号化するところの処理を文字の出現位置とかをメモすることで高速化するか、<br>DFSとかで暗号化できないような文字列は探索しないようにすることでそもそも判定の手間を減らすとかか。<br>あと、ビットマスクの探索順を工夫すれば最後のソートはいらない。<br>まあ、いずれも実装が複雑化しそうなので、これはこれでよかったのかなあ。</p>
<h2 id="E問題"><a href="#E問題" class="headerlink" title="E問題"></a>E問題</h2><p>自明に木構造をしているので、木DP的な何かかなと当たりをつける。<br>ノード数が300と少ないので、全ての点について根であると仮定した場合で回しても十分間に合いそう。<br>終点についてもそれぞれについて終点としてみて試せば300*300*300で間に合うんじゃないか、となったが、<br>擬似コード書き始める時点で、終点を固定して探索するの厄介だなあと考え、もうちょっと考えなおしてみる。</p>
<p>そこで、始点と終点が同じであるパターンからまず考える。<br>始点をAとしておく。<br>葉、つまりこの先に何もない島につながっている橋はわざわざ渡る必要もなく、即座に撤去すれば良い。<br>そうではない島(Bとおく)につながっている橋は、まず、Bより先にある橋を撤去する必要があるので、一度その橋をわたらなければならない。<br>Bについても、Aに戻るためには同じ橋を渡らなければならないので即座には撤去できず、Bよりも先にある橋を全て撤去してBに戻り、<br>Aに戻り、やっとA-B間の橋を撤去出来る。<br>つまり、ある島を始点とした場合、それを根にした木と考えた時、葉をつなぐ橋は即座に撤去し、そうでない橋は2回渡った後撤去することで、<br>全ての橋を撤去できる。始点と終点が同じならこれが最小コストのはずだ。</p>
<p>始点と終点が異なる場合、最後に終点まで行くとき、そのパス上にある橋を渡ることになるが、この時、戻る必要性がないので、渡った時点で即撤去できる。<br>つまり、始点と終点が異なる場合、始点から終点までのパス長ぶん戻るコストを節約できるという訳である。<br>よって、始点と終点が異なる場合の最終コストは始点を固定した場合、その始点から最も長い長さの葉ではない島を終点とした時である。</p>
<p>コードとしては、DFSで始点と終点が同じと仮定した場合のコストを計算しつつ、始点からその島までのコストを持つことで最も遠い島を探すようなコードになった。<br>最も遠い島に関してと始点と終点が同じ時のコストを計算するDFSを分けてもDFS1回の計算量が高々ノード数程度なので、十分に間に合う。</p>
<p>#感想・反省<br>3度目の参戦となり、今までの反省を活かせたんじゃないかなと思っている。<br>1度目は個人としての能力があまりにも低すぎた＆相方がガチ勢だったので、足を引っ張るだけのゴミだったのだが、<br>2度目は自分の能力もそれなりについて、相方もほぼ同レベルだったが、結構足を引っ張ってしまったと反省していた。<br>原因はちゃんと実装を細かいレベルで考えていなかったことで、<br>方針は立っても細かいところでつまり1台しか使えないパソコンをかなり占有してしまった。</p>
<p>今回は相方が実装している間に、実装の細かいところをじっくりと考えたので、実装はかなり早く終わったのではないかな、と思っている。<br>前回の僕であれば、Eで始点・終点それぞれ固定して探索しようで行けると思い込んで実装に詰まっているところだった。<br>あと、チーム全体和やかな雰囲気だったので、練習量も個人の能力もそこそこだった割にはいい成績を残せたのかなと。</p>
<p>ただ、今回も反省はあって、入出力パターンの確認はしっかりやるべきだった。<br>これで1回躓いてしまった。ロスは小さかったかもしれないが、やはり、事前に意識すべき範囲であった。</p>
<p>#まとめ<br>ICPCにおいて最も重要なこと、それはパーフェクト・ハーモニー、完全調和だ！</p>
<p>（強い人に怒られそう）</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-04-19T13:11:00.000Z"><a href="/hexo/2014/04/19/code-reading.html">2014-04-19</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2014/04/19/code-reading.html">Vimでコードリーティング</a></h1>
  

    </header>
    <div class="entry">
      
        <p>C言語で書かれた比較的大きなプログラムを読むことになったので、<br>やり方をちょっと調べながら試している。</p>
<p>今まではVim+ctagsでタグジャンプして読み進めるで対応していたが、<br>大きめで呼出がアッチコッチ飛ばされたりするとなかなかつらい。<br>また、一度読んだところも頭に入らず、もう一度読むという事もしばしば。</p>
<p>ということで、この辺を参考にする<br><a href="http://blog.matsumoto-r.jp/?p=2369" target="_blank" rel="noopener">人間とウェブの未来 - GNU GLOBALとvimで巨大なコードでも快適にコードリーディング</a><br><a href="http://testnoda.sakura.ne.jp/index.php?plugin=attach&refer=testnoda%2F%E3%83%9A%E3%83%BC%E3%82%B8%E4%BD%9C%E8%80%85&openfile=%E3%81%B2%E3%82%89%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%88%9D%E5%BF%83%E8%80%85%E5%A5%AE%E9%97%98%E8%A8%98.pdf" target="_blank" rel="noopener">ひらメソッド初心者奮闘記（PDF）</a></p>
<p>ひらメソッドっていうのは、コードを読みながら、<br>関数ごとにwikiのページをつくって、ボトムアップに読んで行きましょうというもの。<br>コードを読む時、GNU GLOBALとVimを連携させることで、定義にポンポン飛べる。</p>
<p>で、wikiなのだが、pukiwikiを使って管理しろみたいなページを結構見かけたけど、<br>環境構築面倒だし、pukiwikiは更新止まっているとかいう噂も聞いたしで気が進まない。<br>なので、Vimwikiを使うことにした。<br><a href="http://nanasi.jp/vim/vimwiki.html" target="_blank" rel="noopener">Vimwiki : Vimエディタ上で動作するWiki環境</a></p>
<p>僕がVimwikiを導入した時、なぜかページを編集するたびエラー吐いて何かなあと思ったら、<br>シンタックスファイルで使われているoptionsとかいう変数が<br>他のプラグインと衝突していたらしく、<br>optionsをvimwiki_optionsとかに置換したらなおった。</p>
<p>まだ、手探り感あって上手くいくかわからんが、とりあえずこれで。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-07-10T10:38:00.000Z"><a href="/hexo/2013/07/10/eigen-sparse.html">2013-07-10</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2013/07/10/eigen-sparse.html">Eigenで疎行列を扱う</a></h1>
  

    </header>
    <div class="entry">
      
        <p>ある方程式とかを解くときに、行列をつくるということはよくやるが、<br>その内の非ゼロ要素が極端に少ない場合、行列がムダにおおきくなってしまうので、<br>疎行列用のクラスを使ってやる必要がある。</p>
<p>Eigenの場合、SparseMatrixという疎行列クラスがあるので、これを使えば行列のように<br>簡単に扱えて便利だった。<br>boostとかにも疎行列用のクラスはあるのだが、どこのサイトで見たか忘れたが、各種ライブラリと速度比較してEigenはかなり優秀だそうで。</p>
<p>検索しても情報が少ないが、公式のチュートリアルとリファレンスが最もまともな資料だった（ともに英語）。<br><a href="http://eigen.tuxfamily.org/dox/TutorialSparse.html" target="_blank" rel="noopener">Tutorial page 9 - Sparse Matrix</a><br><a href="http://eigen.tuxfamily.org/dox/classEigen_1_1SparseMatrix.html" target="_blank" rel="noopener">SparseMatrix&lt; _Scalar, _Options, _Index &gt; Class Template Reference</a></p>
<p>要素のセット方法を探すのに結構手間取った。<br>個別に要素をセットするときはinsertメソッドを使い、<br>まとめてセットするならTutorialのFirst<br>Exampleにあるみたいに、Eigen::Tripletのvectorをつくってから、setFormTripletsでやるのが楽かなって感じ。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-04-18T07:37:00.000Z"><a href="/hexo/2013/04/18/mkd-vim.html">2013-04-18</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2013/04/18/mkd-vim.html">markdownをvimで扱う</a></h1>
  

    </header>
    <div class="entry">
      
        <p>最近、ノーパで授業ノートを取る機会が増えてきた。<br>今まではプレーンテキストで何とかしていたのだが、さすがに整形しないとあれなのでmarkdown記法を使うことにした。</p>
<p>そのために以下のプラグインを導入。</p>
<ul>
<li><a href="https://github.com/plasticboy/vim-markdown" target="_blank" rel="noopener">plasticboy/vim-markdown</a></li>
</ul>
<p>vim用のmarkdownのシンタックスファイル。<br>数年前はバグがあるとか叩かれていたみたいだけど、最近も更新されているようなのでそういうことはもうないと思われる。<br>少なくとも、僕はまだバグに出会っていない。</p>
<ul>
<li><a href="https://github.com/thinca/vim-quickrun" target="_blank" rel="noopener">thinca/vim-quickrun</a></li>
</ul>
<p>編集のプログラムをその場でさっと実行するためのプラグイン。<br>これを使うことで、markdown記法のテキストをサッと整形してブラウザでプレビューさせることができる。</p>
<ul>
<li><a href="https://github.com/tyru/open-browser.vim" target="_blank" rel="noopener">tyru/open-browser.vim</a></li>
</ul>
<p>vimから指定したURLをブラウザで立ち上げるプラグイン。<br>quickrunと組み合わせて使った。</p>
<p>これらのプラグインを導入した後、vimrcに以下の記述を追加。</p>
<pre><code>let g:quickrun_config = {}
let g:quickrun_config.mkd = {
            \ &apos;outputter&apos; : &apos;browser&apos;,
            \   &apos;command&apos;: &apos;pandoc&apos;,
            \   &apos;exec&apos;: &apos;%c --from=markdown --to=html %o %s %a&apos;,
            \ }</code></pre><p>pandocはmarkdownのテキストをhtmlに変換するコマンド。<br>他にももっといいのがあるらしいのだが、aptで簡単に導入できるので今回はこれを使った。</p>
<p>これで&lt;Leader&gt;rでブラウザで仕上がりがプレビューできる。</p>
<p>参考：<br><a href="http://blog.glidenote.com/blog/2013/01/10/vim-quickrun-marked/" target="_blank" rel="noopener">vim-quickrunとMarkedでmarkdown編集が快適になった - Glide Note -グライドノート</a><br><a href="http://vim-users.jp/2011/09/hack230/" target="_blank" rel="noopener">Vim-users.jp - Hack #230: Markdown形式の文書を書く2 (quickrun0.5.0対応版)</a></p>
<p>本当はリアルタイムでプレビューとかする方法もあるらしいが、とりあえずこれで満足した。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-03-24T06:25:00.000Z"><a href="/hexo/2013/03/24/tig.html">2013-03-24</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2013/03/24/tig.html">tig便利</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Gitの変更履歴をとても便利に閲覧することができるtigがなかなか。<br>詳しくは[Tig の表示方法あれこれ #git #AdventCalendar #tig</p>
<ul>
<li>Qiita](<a href="http://qiita.com/items/4ce9918b6dd6971d60e4" target="_blank" rel="noopener">http://qiita.com/items/4ce9918b6dd6971d60e4</a>)</li>
</ul>
<p>gitkのCUI版みたいなのり。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-03-03T11:59:00.000Z"><a href="/hexo/2013/03/03/title.html">2013-03-03</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2013/03/03/title.html">VimShellを久々に使ってみたら便利だった</a></h1>
  

    </header>
    <div class="entry">
      
        <p>以前、VimShellを使おうとして入れてみたのだが、はっきりとした理由は忘れたが、いまいちなので使わなかった。<br>が、久々に使ってみると普通のシェルのように使えるようになっていた。</p>
<p>##install<br><a href="https://github.com/Shougo/vimshell" target="_blank" rel="noopener">ここ</a>から  </p>
<p>導入にはvimprocが必要で、加えてunite.vimとneocomplcacheがないと、一部の拡張機能が使えない。</p>
<p>##使い方<br>:VimShellでshellになる<br>インサートモードで入力、コマンドモードでは普通にいつものvimみたいに動いて、<br>ヤンクとかもできる。<br>インサートモードではCtrl+lでコマンドの履歴表示、tabで補完がつかえる。<br>:VimShellPopで画面の一部でVimshellが起動するのでちょっとしたコマンドを起動するには便利。<br>    :VimShellInteractive [任意のインタプリタ]<br>はスクリプト言語を走らせるのにはかなり便利で、vimで編集しているテキストをそのインタプリタに送りつけるという事ができる。</p>
<p>非同期でコマンドを実行してくれるので、<br>コンパイルしながらちょっとコードの確認とかいうこともできる。</p>
<p>以前はインタプリタはiexeとかしないと動かなかったんだけど、そういうこともないみたい。</p>
<p>##欠点<br>bashrcやzshrcとの連携機能は無いので、そっちで独自の設定をみっちりやっていると使いにくいかもしれない。<br>エイリアスくらいなら自動変換ツールくらい誰かつくっていそうなものだが。</p>
<p>コマンドの補完はやはり賢くない気がする。加えて、個人的にneocomlcacheの動作がイマイチだと思ったので普段は使わないのだが、<br>これを使わないと、ファイル名補完くらいしか効かない。</p>
<p>あと、gnuplot -persistでプロットしたグラフがgnuplot終了後消えてしまった。</p>
<p>とかまあまあ、完全なシェルとしてはさすがに使えないにしても、十分に使う価値のあるツールだとは思う。<br>更新も活発だし、作者はzshを目標としているらしいので、これからもどんどん良くなっていくのではないでしょうか。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-02-22T05:52:00.000Z"><a href="/hexo/2013/02/22/new-post.html">2013-02-22</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2013/02/22/new-post.html">git pullをrebaseで行う</a></h1>
  

    </header>
    <div class="entry">
      
        <p>複数人でリモートのレポジトリをいじるとリモートの変更を<br>git pullでひっぱって来ないといけないわけだが、<br>git pullはremoteの変更をgit fetchして取ってきてから、<br>その変更を自分の追跡ブランチにmergeをするということをしている。<br>そのため、場合によっては無駄にマージコミットができてしまい、気が分岐しているように見えて、<br>ログの参照性をさげてしまう。<br>そこでpull時にmergeの代わりにrebaseを使い、そのようなことを避けるオプションがある。<br>    git pull –rebase</p>
<p><a href="http://keijinsonyaban.blogspot.jp/2010/11/git-tips.html" target="_blank" rel="noopener">見えないチカラ: 【翻訳】あなたの知らないGit Tips</a>によると、<br>    git config –global pull.rebase true<br>としてあげると全追跡ブランチでpull時はオプション無しでrebaseを使うようになる。(Git 1.7.9から)</p>
<p>ただし、rebaseでpullしてくると</p>
<pre><code>1. 追跡ブランチからブランチを切る
2. そのブランチに対して追跡ブランチにマージコミットを打つ（その間、追跡ブランチには何もコミットしていない）
3. 追跡ブランチでpull</code></pre><p>とすると、マージコミットが消えて、その追跡ブランチからブランチを切ったという情報が消えてしまった。<br>これはマージコミットをリバートするときはどちらを残すか明示的に指定しないといけないように、<br>どちらが本来の流れか分からなくなるからか？<br>にわかだからよくわかりません＞＜</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-12-28T10:21:00.000Z"><a href="/hexo/2012/12/28/new-post.html">2012-12-28</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2012/12/28/new-post.html">Gitでのミスリカバリー</a></h1>
  

    </header>
    <div class="entry">
      
        <p>##マージコミットをリバート<br>うっかり間違ったブランチで–no-ffでmergeを打ってしまった場合、<br>revertでそのコミットの変更を消すコミットをつくることができる。<br>ただし、このときどちらのブランチを残すのかという事を指示してあげる必要がある。<br>git logなどで、その時のマージコミットのログを見ると、どのコミット同士をマージしたのかということが書いてある。<br>それを見てどちらを残すかを-mオプションで指定する。</p>
<p>詳しくは<a href="http://books.google.co.jp/books?id=8DAvoM4OMxEC&printsec=frontcover&hl=ja#v=onepage&q&f=false" target="_blank" rel="noopener">ここ</a>の80ページ目あたりが親切。</p>
<p>##リモートレポジトリに対してリセットをする<br><a href="http://tmtms.hatenablog.com/entry/20101221/git" target="_blank" rel="noopener">Gitでリモートリポジトリを巻き戻す - @tmtms のメモ</a>を参考にした。</p>
<p>まず、リセットしたいレポジトリのバックアップレポジトリをつくる。<br>これはいざ間違えた時の対策。<br>    git push origin tar_bak</p>
<p>つづいてgit reflogして戻したい地点を見つける<br>    <strong>***</strong> HEAD@{0}: hoge<br>    <strong>***</strong> HEAD@{1}: hogehoge<br>    <strong>***</strong> HEAD@{2}: hogehogehoge<br>    <strong>***</strong> HEAD@{3}: hogehogehogehoge<br>    …<br>hogehogehogeの地点まで戻りたいとして、<br>    git push -f origin HEAD@{2}:tar<br>とすればよい。こうすると、origin/tarの指すコミットが移動する。</p>
<p>他の人にも影響することなので、やるときは注意。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-11-26T05:17:00.000Z"><a href="/hexo/2012/11/26/new-post.html">2012-11-26</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2012/11/26/new-post.html">Ubuntuのgccでリンクのオプションが無視される問題について</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Ubuntuを10.04から12.04にアップデートした際、<br>gccで-lで指定したファイルが全然リンクされないという問題があった。<br>たとえば、<br>    gcc -lm main.c<br>として、main.cで普通にmathライブラリを使うようなファイルを書くと、<br>そんな関数の実体見つからんよ、と怒られていた。</p>
<p>ちょっと検索したらこんなの見つかった。<br><a href="https://forums.ubuntulinux.jp/viewtopic.php?id=13673" target="_blank" rel="noopener">Ubuntu日本語フォーラム / math.h へのリンクがうまくいかない</a><br>どうやら、Ubuntuのあるバージョンからgccの–as-neededというオプションが<br>デフォルトで有効になるような親切設計になったらしく、<br>これがあると-lのオプションはソースファイルの後に置かないと無視されるようになるらしい。<br>なので、<br>    gcc main.c -lm<br>とすればいいのだが、makeの暗黙ルールでLDFLAGSはソースの前に置かれるようなっているので、なんかルール書き換えるのは癪。</p>
<p>そこで、LDFLAGSに<br>    -Wl,–no-as-needed<br>というオプションを追加してやると、–as-neededオプションが無効化された。</p>
<p>しかし、なんでこんなオプションをデフォルトで有効にしてしまったのか。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-11-20T12:49:00.000Z"><a href="/hexo/2012/11/20/git.html">2012-11-20</a></time>
      
      
  
    <h1 class="title"><a href="/hexo/2012/11/20/git.html">gitでのbranchでの開発</a></h1>
  

    </header>
    <div class="entry">
      
        <p>最近何かとgitを使うことが多くなったので、branchの作り方から<br>mergeの仕方まできちんと学ばなきゃなと思い立って色々調べた。</p>
<p>##リモートブランチの扱い方<br><a href="http://d.hatena.ne.jp/nayutaya/20090519/1242701594" target="_blank" rel="noopener">“gitのリモートブランチを使って作業を行う流れのメモ - 那由多屋 開発日誌”</a></p>
<p>##merge<br>ブランチつくったら、あとでマージしなきゃいけない。<br>実はgitのマージにはいくつか種類があるらしく、これはきちんと把握しておく必要が有りそう。<br><a href="http://d.hatena.ne.jp/sinsoku/20111025/1319497900" target="_blank" rel="noopener">“図で分かるgit-mergeの–ff, –no-ff, –squashの違い - アジャイルSEを目指すブログ”</a><br>これを読む限り、基本的には–no–ffでマージコミットをきちんとつくるのが<br>あとでログ見返すときにも良さそうな気がする。</p>
<p>##うっかりマージミスした時の対処。<br>commitを取り消すコマンドであるresetは使い方を誤るととんでもないことになるので気をつけなければならない。<br>このへんが参考になりそう。<br><a href="http://d.hatena.ne.jp/ToMmY/20110719/1311034743" target="_blank" rel="noopener">git で merge をとりけす法 - ToMmY Makes Love with Codes</a><br><a href="http://projects.tsuntsun.net/~nabeken/diary/Sysadmin/git-7.html" target="_blank" rel="noopener">~nabeken/diary/ : git で間違って merge してしまった場合 (fast forward でマージしてしまったのを取り消したい)</a>  </p>
<p>##rebaseコマンドについて<br>誰かがrebaseコマンド使えない奴はgit使えるうちに入らないと言っていたので調べた。<br>コミットに対して直接変更を加えるので危ないことは確かっぽいが、<br>小さなmergeをしたい時とかはこっちのほうが良いのかもしれない。<br>少なくとも知っておいて損はないと思うので。<br><a href="http://d.hatena.ne.jp/sinsoku/20110925/1316933393" target="_blank" rel="noopener">図で分かるgit-rebase - アジャイルSEを目指すブログ</a>  </p>
<p>##間違ったブランチを変更してしまった！<br>gitならこんなことまで出来るんだって感じ。<br>記事読んで理解するのにちょっと時間かかった。<br><a href="http://d.hatena.ne.jp/ToMmY/20110914/1316024033" target="_blank" rel="noopener">別のトピックブランチにしてしまった複数のコミットを移動する - ToMmY Makes Love with Codes</a>  </p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
    <a href="/hexo/page/5/" class="alignleft prev">前の投稿</a>
  
  
    <a href="/hexo/page/7/" class="alignright next">次の投稿</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="検索">
    <input type="hidden" name="q" value="site:garasubo.github.io/hexo">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">最近の投稿</h3>
  <ul class="entry">
    
      <li>
        <a href="/hexo/2022/09/16/isucon12.html">ISUCON12予選敗戦記</a>
      </li>
    
      <li>
        <a href="/hexo/2021/12/31/nenmatsu-poem.html">2021年の振り返り</a>
      </li>
    
      <li>
        <a href="/hexo/2021/11/07/rust-memory.html">Rustのメモリ管理機能とその特徴</a>
      </li>
    
      <li>
        <a href="/hexo/2021/08/26/isucon11.html">ISUCON11予選参加記（予選敗退）</a>
      </li>
    
      <li>
        <a href="/hexo/2021/04/04/theseus.html">論文紹介： Theseus: an Experiment in Operating System Structure and State Management</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
<a class="twitter-timeline" data-height="600" href="https://twitter.com/garasubo">Tweets by garasubo</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>



  

  
<div class="widget tag">
  <h3 class="title">タグ</h3>
  <ul class="entry">
  
    <li><a href="/hexo/tags/Arm/">Arm</a><small>2</small></li>
  
    <li><a href="/hexo/tags/CLI/">CLI</a><small>1</small></li>
  
    <li><a href="/hexo/tags/Cortex-M/">Cortex-M</a><small>2</small></li>
  
    <li><a href="/hexo/tags/Kernel-VM/">Kernel/VM</a><small>2</small></li>
  
    <li><a href="/hexo/tags/Rust/">Rust</a><small>16</small></li>
  
    <li><a href="/hexo/tags/embedded/">embedded</a><small>1</small></li>
  
    <li><a href="/hexo/tags/isucon/">isucon</a><small>6</small></li>
  
    <li><a href="/hexo/tags/osdev/">osdev</a><small>6</small></li>
  
    <li><a href="/hexo/tags/paper/">paper</a><small>10</small></li>
  
    <li><a href="/hexo/tags/procon/">procon</a><small>2</small></li>
  
    <li><a href="/hexo/tags/rust/">rust</a><small>1</small></li>
  
    <li><a href="/hexo/tags/unikernel/">unikernel</a><small>3</small></li>
  
    <li><a href="/hexo/tags/x11/">x11</a><small>1</small></li>
  
  </ul>
</div>


  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2022 garasubo
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/hexo/js/jquery.imagesloaded.min.js"></script>
<script src="/hexo/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'garasubo';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/hexo/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/hexo/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
